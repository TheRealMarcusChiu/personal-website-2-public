<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GCN2D792VE"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GCN2D792VE');
  </script>

  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5G85VDQT');</script>
  

  <link href='/favicon.ico' rel='shortcut icon'>
  <link href='/favicon.ico' rel='apple-touch-icon'>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Homelab #5 - Kubernetes Cluster (App Bonanza!!!!!!) | Marcus Chiu</title>

  
  <meta property="og:url" content="http://www.marcu/tinkering/2025-06-08/">
  <meta property="og:site_name" content="Marcus Chiu">
  <meta property="og:title" content="Homelab #5 - Kubernetes Cluster (App Bonanza!!!!!!)">
  <meta property="og:description" content="Homelab Series:
Homelab #1 - Humble Beginnings Homelab #2 - Proxmox Cluster Homelab #3 - Kubernetes Cluster (Initial Setup) Homelab #4 - Kubernetes Cluster (Infrastructure Setup) Homelab #5 - Kubernetes Cluster (App Bonanza!!!!!!) Kubernetes Cluster (App Bonanza!!!!!!) Here‚Äôs a screenshot of my dashboard displaying most of my 50 plus servers :D
It‚Äôs still a work in progress.
What Apps am I Running? Here are some of the apps I‚Äôm running on Kubernetes:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="tinkering">
    <meta property="article:published_time" content="2025-06-08T17:36:22-05:00">
    <meta property="article:modified_time" content="2025-06-08T17:36:22-05:00">








  
  <meta name='twitter:card' content='summary'>
  <meta name='twitter:url' content='http://www.marcuschiu.com'>
  <meta name='twitter:title' content='Marcus Chiu - FullStack Developer'>
  <meta name='twitter:description' content="Marcus Chiu's Website">
  <meta name='twitter:image' content='http://doc.marcuschiu.com/assets/images/me.png'>
  <meta name='twitter:site' content='@TheMarcusChiu'>

  
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js" integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D" crossorigin="anonymous"></script>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">

  
      <link rel="stylesheet" href="/css/main.min.1558b344c36b61b19cfd7c252df78bc415224093911f787246e512abdb643835.css" integrity="sha256-FVizRMNrYbGc/XwlLfeLxBUiQJORH3hyRuUSq9tkODU=" crossorigin="anonymous">
      <link rel="stylesheet" href="/css/carousel.min.547c0f91e09efcb470149124bf3fbe719e6eb173ce327ff87c6a3f9c0e0632fe.css" integrity="sha256-VHwPkeCe/LRwFJEkvz&#43;&#43;cZ5usXPOMn/4fGo/nA4GMv4=" crossorigin="anonymous">
  
        <script src="/js/main.6e6c6a5bd91a840db66a2739aeeb445da2883d410eb7daeac09254488ec502c7.js" integrity="sha256-bmxqW9kahA22aic5rutEXaKIPUEOt9rqwJJUSI7FAsc=" crossorigin="anonymous"></script>
        <script src="/js/main.e53ff96c4fc49d490548db4ff73729267772caa1f7e0af027b12bcd81c45728f.js" integrity="sha256-5T/5bE/EnUkFSNtP9zcpJndyyqH34K8CexK82BxFco8=" crossorigin="anonymous"></script>
</head>
<body class="text-light dark">
  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5G85VDQT" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  
  <div class="container pt-5">
    <header>
      
  <div class="row mt-5 pt-5">
    <nav aria-label="breadcrumb" class="small">
      <ol class="breadcrumb fw-bold bg-transparent" >
    <li class="breadcrumb-item">
      <a href="/">üè† Home</a>
    </li>
    <li class="breadcrumb-item">
      <a aria-current="true" class="ancestor" href="/tinkering/">üõ† Tinkering</a>
    </li>
    <li class="breadcrumb-item">
      <a href="/arting/">üé® Arting</a>
    </li>
    <li class="breadcrumb-item">
      <a href="/rambling/">üí≠ Rambling</a>
    </li>
    <li class="breadcrumb-item">
      <a href="/traveling/">üåé Traveling</a>
    </li>
    <li class="breadcrumb-item">
      <a href="/about/">üôã About</a>
    </li>
      </ol>
    </nav>
  </div>

    </header>
    <main>
      
  <div class="post">
    <header class="mb-4">
      <h1 class="text-uppercase">Homelab #5 - Kubernetes Cluster (App Bonanza!!!!!!)</h1>
      <div aria-label="breadcrumb">
        <ol class="breadcrumb bg-transparent">

          
          
          <li class="breadcrumb-item tiny">
            <time datetime="2025-06-08T17:36:22-05:00">June 8, 2025</time>
          </li>

          
          
          

          <li class="breadcrumb-item tiny">
            3 minutes
          </li>

        </ol>
      </div>
    </header>






    <article>
      <p>Homelab Series:</p>
<ul>
<li><a href="/tinkering/2024-08-26/">Homelab #1 - Humble Beginnings</a></li>
<li><a href="/tinkering/2025-06-04/">Homelab #2 - Proxmox Cluster</a></li>
<li><a href="/tinkering/2025-06-05/">Homelab #3 - Kubernetes Cluster (Initial Setup)</a></li>
<li><a href="/tinkering/2025-06-06/">Homelab #4 - Kubernetes Cluster (Infrastructure Setup)</a></li>
<li><a href="/tinkering/2025-06-08/">Homelab #5 - Kubernetes Cluster (App Bonanza!!!!!!)</a></li>
</ul>
<h1 id="kubernetes-cluster-app-bonanza">Kubernetes Cluster (App Bonanza!!!!!!)</h1>
<p>Here&rsquo;s a screenshot of my dashboard displaying most of my 50 plus servers :D</p>
<p>It&rsquo;s still a work in progress.</p>
<p><a href="assets/1.jpeg"><img src="assets/1.jpeg" alt="alt"></a></p>
<h1 id="what-apps-am-i-running">What Apps am I Running?</h1>
<p>Here are some of the apps I&rsquo;m running on Kubernetes:</p>
<ul>
<li>13ft - bypass website paywalls</li>
<li>code-server - VC Code inside web browser</li>
<li>dashy - a dashboard for homelabs</li>
<li>k8s-dashboard - a dashboard for the Kubernetes cluster</li>
<li>librespeed - an internet speeed test</li>
<li>open-webui - an opensource &ldquo;ChatGPT&rdquo; web interface</li>
<li>stirling-pdf - a PDF manipulator within browser</li>
<li>changedetection - monitors website changes</li>
<li>cyberchef - a SWE toolbox for data manipulation</li>
<li>homepage - a dashboard for homelabs</li>
<li>k8s-metrics-service - i forgot</li>
<li>mealie - a recipe manager</li>
<li>sockpuppetbrowser - an internal tool for changedetection</li>
<li>whoogle - a privacy-respecting Google</li>
</ul>
<h1 id="example-app-installation">Example App Installation</h1>
<p>Here we will install the homepage app as an example for most of the applications I&rsquo;m running.</p>
<p>In this case, we will be creating 4 Kubernetes workloads:</p>
<ol>
<li><strong>homepage-pvc.yml</strong> - this allocates PersistentVolumeClaims for persistent storage the homepage will be using</li>
<li><strong>homepage-deployment.yml</strong> - this defines the Deployment details needed to download and run the homepage container</li>
<li><strong>homepage-svc.yml</strong> - this defines the Service that will act as the gateway to the running homepage container</li>
<li><strong>homepage-ingress.yml</strong> - this will auto issue an SSL certificate</li>
</ol>
<h3 id="1-persistentvolumeclaim">1. PersistentVolumeClaim</h3>
<p>Create a file with the following contents</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">PersistentVolumeClaim</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cephfs-homepage</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">accessModes</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">ReadWriteMany</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">storage</span>: <span style="color:#ae81ff">1Gi</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">storageClassName</span>: <span style="color:#ae81ff">rook-ceph-fs</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">PersistentVolumeClaim</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cephfs-homepage-public</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">accessModes</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">ReadWriteMany</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">storage</span>: <span style="color:#ae81ff">1Gi</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">storageClassName</span>: <span style="color:#ae81ff">rook-ceph-fs</span>
</span></span></code></pre></div><p>Then apply it</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl apply -f homepage-pvc.yml
</span></span></code></pre></div><h3 id="2-deployment">2. Deployment</h3>
<p>Create a file with the following contents</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">homepage</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">homepage</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">homepage</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">automountServiceAccountToken</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">dnsPolicy</span>: <span style="color:#ae81ff">ClusterFirst</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">enableServiceLinks</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">homepage</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">image</span>: <span style="color:#ae81ff">ghcr.io/gethomepage/homepage:latest</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">3000</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">HOMEPAGE_ALLOWED_HOSTS</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">value</span>: <span style="color:#e6db74">&#34;homepage.lan&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">volumeMounts</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/app/config</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cephfs-homepage</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/app/public/images</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cephfs-homepage-public</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cephfs-homepage</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">persistentVolumeClaim</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">claimName</span>: <span style="color:#ae81ff">cephfs-homepage</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">readOnly</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cephfs-homepage-public</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">persistentVolumeClaim</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">claimName</span>: <span style="color:#ae81ff">cephfs-homepage-public</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">readOnly</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>Then apply it</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl apply -f homepage-deployment.yml
</span></span></code></pre></div><h3 id="3-service">3. Service</h3>
<p>Create a file with the following contents</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">homepage</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">3000</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">homepage</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">LoadBalancer</span>
</span></span></code></pre></div><p>Then apply it</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl apply -f homepage-svc.yml
</span></span></code></pre></div><h3 id="4-ingress">4. Ingress</h3>
<p>Create a file with the following contents</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">networking.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Ingress</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">homepage</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">annotations</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">cert-manager.io/cluster-issuer</span>: <span style="color:#e6db74">&#34;letsencrypt-prod&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">nginx.ingress.kubernetes.io/rewrite-target</span>: <span style="color:#ae81ff">/</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ingressClassName</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tls</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">hosts</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">homepage.lan</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">secretName</span>: <span style="color:#ae81ff">tls-homepage</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">host</span>: <span style="color:#ae81ff">homepage.lan</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">http</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">paths</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pathType</span>: <span style="color:#ae81ff">Prefix</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">backend</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">service</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">homepage</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">port</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">number</span>: <span style="color:#ae81ff">80</span>
</span></span></code></pre></div><p>Then apply it</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl apply -f homepage-ingress.yml
</span></span></code></pre></div><h1 id="repeat">Repeat</h1>
<p>The example above is pretty much the template I&rsquo;ve used for deploying the rest of the applications.</p>
<p>Of course, some may not use PersistentVolumeClaims and other may not use Ingress. So create and apply those manifest files accordingly.</p>

    </article>
  </div>
  
<div class="row page-prev-next">
    <div class="col-md">
        
            <a href="/tinkering/2025-06-06/">
                <span>‚Üê </span>
                <span class="title">Homelab #4 - Kubernetes Cluster (Infrastructure Setup)</span>
            </a>
        
    </div>
    <div class="col-md text-md-end">
        
    </div>
</div>

  <div id="disqus_thread"></div>
<script>
    

    

    (function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://marcuschiu.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    </main>
  </div>
</body>
</html>
